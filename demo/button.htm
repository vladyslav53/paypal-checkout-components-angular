<!DOCTYPE html>

<script src="../dist/paypal.checkout.v4.js"></script>

<button onclick="checkout()">Checkout</button>

<button onclick="checkoutComp.close()">close</button>

<script>

    var checkoutComp;

    var button = paypal.PayPalButton.attach();

    if (window.location.href.indexOf('lightbox=true') !== -1) {
        paypal.PayPalCheckout.contexts.lightbox = true;
    }

    function checkout() {
        checkoutComp = paypal.PayPalCheckout.init({

            url: './checkout.htm',

            paymentToken: button.props.paymentToken,
            onPaymentAuthorize: button.props.onPaymentAuthorize,
            onPaymentComplete: button.props.onPaymentComplete,
            onPaymentCancel: button.props.onPaymentCancel
        });

        if (button.props.submitForm) {
            checkoutComp.hijackSubmitParentForm();
        } else {
            checkoutComp.renderToParent();
        }
    }
</script>
