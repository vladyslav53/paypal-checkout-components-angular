<!DOCTYPE html>

<style>
    iframe {
        border: 1px dashed grey;
    }

    form {
        border: 1px dashed lightblue;
        display: inline-block;
        padding: 10px;
    }
</style>

<script   src="https://code.jquery.com/jquery-1.12.4.js"   integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="   crossorigin="anonymous"></script>

<script src="../dist/paypal.checkout.v4.js"></script>

<script>

    window.mockDomain = 'http://www.merchant.com';

    ppxo.PayPalCheckout.contexts.lightbox = true;

    function getToken(callback) {
        setTimeout(function() {
            callback(null, 'EC-XYZ123456789ABCDE');
        }, 1500);
    }

    function onPaymentAuthorize(token) {
        console.log('payment authorized with token:', token);
    }

</script>

<!-- ******************************************* -->

<h2>1. Standard merchant-owned form with target</h2>

<form method="post" action="./checkout.htm?token=EC-XXXXXXXXXXXXXXXXX">
    <button data-paypal-button data-env="demo">Checkout</button>
</form>

<hr>

<!-- ******************************************* -->

<h2>2. Standard merchant-owned link</h2>

<a href="./checkout.htm?token=EC-XXXXXXXXXXXXXXXXX" data-paypal-button data-env="demo">Checkout</a>

<hr>

<!-- ******************************************* -->

<h2>3. Form container with no button with sandbox</h2>

<form id="myContainer1" method="post" action="./checkout.htm?token=EC-XXXXXXXXXXXXXXXXX"></form>

<script>
    paypal.checkout.setup('Your-Merchant-ID', {
        environment: 'sandbox',
        container: 'myContainer1'
      });
</script>

<hr>

<!-- ******************************************* -->

<h2>4. Form container with no button</h2>

<form id="myContainer2" method="post" action="./checkout.htm?token=EC-XXXXXXXXXXXXXXXXX"></form>

<script>
  paypal.checkout.setup('Your-Merchant-ID', {
    environment: 'demo',
    container: 'myContainer2'
  });
</script>

<hr>

<!-- ******************************************* -->

<h2>5. Form container with no button and ajax call</h2>

<form id="myContainer3" action="./checkout.htm"></form>

<script>
    paypal.checkout.setup('Your-Merchant-ID', {
      environment: 'demo',
      container: 'myContainer3',
      click: function () {
        paypal.checkout.initXO();

        getToken(function(err, token) {

            if (err) {
                return paypal.checkout.closeFlow();
            }

            return paypal.checkout.startFlow(token);
        });
      }
    });
</script>

<hr>

<!-- ******************************************* -->

<h2>6. Form container with no button and failed ajax call</h2>

<form id="myContainer4" action="./checkout.htm"></form>

<script>
    paypal.checkout.setup('Your-Merchant-ID', {
      environment: 'demo',
      container: 'myContainer4',
      click: function () {
        paypal.checkout.initXO();

        var action = $.post('http://thissitedoesnotexistxxxxxxx.com/checkout.htm');

        action.done(function (data) {
          paypal.checkout.startFlow('./checkout.htm?token=EC-XXXXXXXXXXXXXXXXX');
        });

        action.fail(function () {
          paypal.checkout.closeFlow();
        });
      }
    });
</script>

<hr>


<!-- ******************************************* -->

<h2>7. Form container with custom button and ajax call</h2>

<button id="checkoutButton">Check out</button>

<script>
    document.getElementById('checkoutButton').addEventListener('click', function() {
        paypal.checkout.initXO();

        var action = $.post('./checkout.htm');

        action.done(function (data) {
          paypal.checkout.startFlow('./checkout.htm?token=EC-XXXXXXXXXXXXXXXXX');
        });

        action.fail(function () {
          paypal.checkout.closeFlow();
        });
    });
</script>

<hr>




<!-- ******************************************* -->

<h2>8. Form container with custom button immediate startFlow</h2>

<button id="checkoutButton2">Check out</button>

<script>
    document.getElementById('checkoutButton2').addEventListener('click', function() {
        paypal.checkout.startFlow('./checkout.htm?token=EC-XXXXXXXXXXXXXXXXX');
    });
</script>

<hr>



