<!DOCTYPE html>

<style>
    iframe {
        border: 1px dashed grey;
    }

    form {
        border: 1px dashed lightblue;
        display: inline-block;
        padding: 10px;
    }
</style>

<script   src="https://code.jquery.com/jquery-1.12.4.js"   integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="   crossorigin="anonymous"></script>

<script src="../dist/paypal.checkout.v4.js"></script>

<!-- ******************************************* -->

<h2>1. Button in iframe</h2>

<div id="button"></div>

<hr>

<!-- ******************************************* -->

<h2>2. Standard merchant-owned button with ajax call</h2>

<button onclick="openPayPalCheckout()">Checkout</button>

<hr>

<!-- ******************************************* -->

<h2>3. Standard merchant-owned link with href</h2>

<a id="checkout-link" href="./checkout.htm">Checkout</a>

<hr>

<!-- ******************************************* -->

<h2>4. Standard merchant-owned form with target</h2>

<form action="./checkout.htm">
    <button id="checkout-button">Checkout</button>
</form>

<hr>

<!-- ******************************************* -->

<h2>5. Standard merchant-owned form with target, button in iframe</h2>

<form action="./checkout.htm">
    <div id="button2"></div>
</form>

<!-- ******************************************* -->


<h2>6. Standard merchant-owned button with ajax call; LightBox rendered with Add Content button</h2>

<button onclick="addcontentCheckout()">Checkout</button>

<hr>

<!-- ******************************************* -->

<h2>7. Standard merchant-owned button with erroring ajax call</h2>

<button onclick="openPayPalCheckoutError()">Checkout</button>

<hr>

<!-- ******************************************* -->


<script>

    window.mockDomain = 'http://www.merchant.com';

    ppxo.postRobot.openBridge('./bridge.htm');

    ppxo.PayPalCheckout.contexts.lightbox = true;

    function paymentToken(resolve) {
        setTimeout(function() {
            resolve('EC-XYZ123456789ABCDE');
        }, 1500);
    }

    function paymentTokenError(resolve, reject) {
        setTimeout(function() {
            reject(new Error('Some Ajax Error'));
        }, 1500);
    }

    function onPaymentAuthorize(token) {
        console.log('payment authorized with paymentToken:', token);
    }





    // 1. Button in iframe

    ppxo.PayPalButton.init({

        url: './button.htm?lightbox=true',

        paymentToken: paymentToken,
        onPaymentAuthorize: onPaymentAuthorize

    }).render('#button');


    // *******************************************---------


    // 2. Standard merchant-owned button with ajax call

    function openPayPalCheckout() {

        var checkout = ppxo.PayPalCheckout.init({

            url: './checkout.htm',

            paymentToken: paymentToken,
            onPaymentAuthorize: onPaymentAuthorize

        }).render();
    }



    // *******************************************---------


    // 3. Standard merchant-owned link with href

    var checkout = ppxo.PayPalCheckout.init({

        paymentToken: paymentToken,
        onPaymentAuthorize: onPaymentAuthorize

    }).hijackButton('#checkout-link');




    // *******************************************---------


    // 4. Standard merchant-owned form with target

    var checkout = ppxo.PayPalCheckout.init({

        paymentToken: paymentToken,
        onPaymentAuthorize: onPaymentAuthorize

    }).hijackButton('#checkout-button');




    // *******************************************---------


    // 5. Standard merchant-owned form with target, button in iframe

    ppxo.PayPalButton.init({

        url: './button.htm?lightbox=true',

        paymentToken: paymentToken,
        onPaymentAuthorize: onPaymentAuthorize,
        submitForm: true

    }).render('#button2');


    // 6. Standard merchant-owned button with ajax call; LightBox rendered with Add Content button

    function addcontentCheckout() {

        var checkout = ppxo.PayPalCheckout.init({

            url: './addcontent.html',

            paymentToken: paymentToken,
            onPaymentAuthorize: onPaymentAuthorize

        }).render();
    }


    // *******************************************---------


    // 7. Standard merchant-owned button with failed ajax call

    function openPayPalCheckoutError() {

        var checkout = ppxo.PayPalCheckout.init({

            url: './checkout.htm',

            paymentToken: paymentTokenError,
            onPaymentAuthorize: onPaymentAuthorize

        }).render();
    }


</script>
