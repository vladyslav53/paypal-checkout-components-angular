<!DOCTYPE html>

<head>
    <meta charset="utf-8" />
</head>

<script   src="https://code.jquery.com/jquery-1.12.4.js"   integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="   crossorigin="anonymous"></script>

<script src="../dist/paypal.checkout.v4.js" data-env="local"></script>

<script>

    window.mockDomain = 'http://www.merchant.com';

    function paymentToken(resolve) {
        $.get('http://xotools/~dbrain/aries.cgi?stage=msmaster&hermes=1&local=1&landingpage=login&ul=0&noredir=1&ts=' + Date.now()).then(function(result) {
            resolve(result.trim());
        });
    }

    function paymentTokenError(resolve, reject) {
        $.get('./token_404.htm?ts=' + Date.now()).error(function(result) {
            reject(new Error('Error from token ajax call'));
        });
    }

    function paymentTokenHashUrl(resolve) {
        var url = window.location.href.split('#')[0];
        var returnUrl = url + '#success';
        var cancelUrl = url + '#cancel';

        $.get('http://xotools/~dbrain/aries.cgi?stage=msmaster&hermes=1&local=1&landingpage=login&ul=0&noredir=1&ts=' + Date.now() + '&returnurl=' + encodeURIComponent(returnUrl) + '&cancelurl=' + encodeURIComponent(cancelUrl)).then(function(result) {
            resolve(result.trim());
        });
    }

    function onPaymentAuthorize(token) {
        console.log('payment authorized with paymentToken:', token);
    }

</script>

<!-- ******************************************* -->

<h2>1. Standard merchant-owned form with target</h2>

<form method="post" action="http://xotools/~dbrain/aries.cgi?stage=msmaster&hermes=1&local=1&landingpage=login&ul=0">
    <button data-paypal-button data-env="demo">Checkout</button>
</form>

<hr>

<!-- ******************************************* -->

<h2>2. Standard merchant-owned link</h2>

<a href="http://xotools/~dbrain/aries.cgi?stage=msmaster&hermes=1&local=1&landingpage=login&ul=0" data-paypal-button data-env="demo">Checkout</a>

<hr>

<!-- ******************************************* -->

<h2>3. Form container with no button with sandbox</h2>

<form id="myContainer1" method="post" action="http://xotools/~dbrain/aries.cgi?stage=msmaster&hermes=1&local=1&landingpage=login&ul=0"></form>

<script>
    paypal.checkout.setup('Your-Merchant-ID', {
        container: 'myContainer1'
      });
</script>

<hr>

<!-- ******************************************* -->

<h2>4. Form container with no button</h2>

<form id="myContainer2" method="post" action="http://xotools/~dbrain/aries.cgi?stage=msmaster&hermes=1&local=1&landingpage=login&ul=0"></form>

<script>
  paypal.checkout.setup('Your-Merchant-ID', {
    container: 'myContainer2'
  });
</script>

<hr>

<!-- ******************************************* -->

<h2>5. Form container with no button and ajax call</h2>

<form id="myContainer3"></form>

<script>
    paypal.checkout.setup('Your-Merchant-ID', {
      container: 'myContainer3',
      click: function () {
        paypal.checkout.initXO();

        paymentToken(function(token) {
            return paypal.checkout.startFlow(token);
        });
      }
    });
</script>

<hr>

<!-- ******************************************* -->

<h2>6. Form container with no button and failed ajax call</h2>

<form id="myContainer4"></form>

<script>
    paypal.checkout.setup('Your-Merchant-ID', {
      container: 'myContainer4',
      click: function () {
        paypal.checkout.initXO();

        paymentTokenError(null, function(err) {
            paypal.checkout.closeFlow();
        });
      }
    });
</script>

<hr>


<!-- ******************************************* -->

<h2>7. Form container with custom button and ajax call</h2>

<button id="checkoutButton">Check out</button>

<script>
    document.getElementById('checkoutButton').addEventListener('click', function() {
        paypal.checkout.initXO();

        paymentToken(function(token) {
            paypal.checkout.startFlow(token);
        });
    });
</script>

<hr>




<!-- ******************************************* -->

<h2>8. Form container with custom button, sync ajax call, immediate startFlow</h2>

<button id="checkoutButton2">Check out</button>

<script>
    document.getElementById('checkoutButton2').addEventListener('click', function() {

        jQuery.ajaxSetup({ async: false });

        paymentToken(function(token) {
            jQuery.ajaxSetup({ async: true });

            paypal.checkout.startFlow(token);
        });
    });
</script>

<hr>

<!-- ******************************************* -->

<h2>9. Form container with no button and ajax call, hash url</h2>

<form id="myContainer9"></form>

<script>
    paypal.checkout.setup('Your-Merchant-ID', {
      container: 'myContainer9',
      click: function () {
        paypal.checkout.initXO();

        paymentTokenHashUrl(function(token) {
            return paypal.checkout.startFlow(token);
        });
      }
    });
</script>

<hr>

